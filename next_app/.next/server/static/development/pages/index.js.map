{"version":3,"file":"static/development/pages/index.js","sources":["webpack:///webpack/bootstrap","webpack:///./components/App.js","webpack:///./pages/index.js","webpack:///./public/styles.scss","webpack:///external \"axios\"","webpack:///external \"react\""],"sourcesContent":[" \t// The module cache\n \tvar installedModules = require('../../../ssr-module-cache.js');\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tvar threw = true;\n \t\ttry {\n \t\t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n \t\t\tthrew = false;\n \t\t} finally {\n \t\t\tif(threw) delete installedModules[moduleId];\n \t\t}\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","import React from 'react'\nimport axios from 'axios'\nimport css from '../public/styles.scss'\n\n// ページ全体\nexport default class Anime extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      anime: [],\n      coursList: [],\n      checked: false\n    }\n    this.check = this.check.bind(this)\n    this.animeSearch = this.animeSearch.bind(this)\n    this.getNowCours = this.getNowCours.bind(this)\n  }\n\n  componentDidMount() {\n    // 現在放送中のデータを最初に表示する\n    this.animeSearch(this.getNowCours())\n    this.setDateList()\n  }\n\n  // アニメ検索\n  // coursはYYYY/Xの形式で渡される\n  animeSearch(cours) {\n    const url = \"http://api.moemoe.tokyo/anime/v1/master/\"+ cours + \"?ogp=1\"\n    axios.get(url).then(res => { \n      this.setState({anime: res.data})\n\n      // 聖地のみなら0件チェック\n      // 絞り込みが無い状態は0件がありえないので実装しない\n      if(this.state.checked) {\n        this.cityEnptyCheck(res.data)\n      }\n    }).catch(error => {\n      alert(\"データの表示ができません\")\n      console.log(\"データ表示NG\")\n      console.log(error)\n    }) \n  }\n\n  // 聖地のみ絞りこむチェックボックスの状態を変更する\n  check() {\n    if(this.state.checked) {\n      this.setState({checked: false})\n    } else {\n      this.setState({checked: true})\n      this.cityEnptyCheck(this.state.anime)\n    }\n  }\n\n  // 聖地データが0件かチェック\n  cityEnptyCheck(data) {\n    const isCityEmpty = data.every((anime) => {\n      return(\n        anime.city_name === \"\"\n      )\n    })\n    if(isCityEmpty) {\n      alert(\"データは0件です\")\n    }\n  }\n\n  // 月から放送クールを求める\n  getCours(month) {\n    if(month <= 3) {\n      return 1\n    } else if(month <= 6) {\n      return 2\n    } else if(month <= 9) {\n      return 3\n    } else if(month <= 12) {\n      return 4\n    }\n  }\n\n  // 放送クールから季節を求める\n  getSeason(cours) {\n    if(cours === 1){\n      return '冬'\n    } else if(cours === 2) {\n      return '春'\n    } else if(cours === 3) {\n      return '夏'\n    } else if(cours === 4) {\n      return '秋'\n    }\n  }\n\n  // 現在放送中の放送クールをYYYY/Xの形式で求める\n  getNowCours() {\n    const date = new Date()\n    const year = date.getFullYear()\n    const month = date.getMonth() + 1\n    const now = year + '/' + this.getCours(month) \n    return now\n  }\n\n  // 検索フォームに表示するリストボックス用の値を設定する。\n  // 2014年冬から放送中の放送クールまで\n  setDateList() {\n    const date = new Date()\n    const year = date.getFullYear()\n    const month = date.getMonth() + 1\n    const cours = this.getCours(month)\n    let coursList = []\n\n    for(var i = year; i >= 2014; i--) {\n      if(i === year) {\n        for(var j = cours; j >= 1; j--) {\n          const cours = i + '/' + j\n          const season = i + '年 ' + this.getSeason(j)\n          coursList.push({season: season, cours: cours})\n        } \n      } else {\n        for(var j = 4; j >= 1; j--) {\n          const cours = i + '/' + j\n          const season = i + '年 ' + this.getSeason(j)\n          coursList.push({season: season, cours: cours})\n        } \n      }\n    }\n    this.setState({coursList: coursList})\n  }\n\n  render() {\n    return (\n      <div>\n        <div className={css.header}>\n          <Header />\n          <AnimeForm search={(cours) => this.animeSearch(cours)} check={this.check} coursList={this.state.coursList} now={this.getNowCours}/>\n        </div>\n        <AnimeList anime={this.state.anime} checked={this.state.checked} />\n      </div>\n    )\n  }\n}\n\n// ヘッダー部\nclass Header extends React.Component {\n  render() {\n    return (\n      <h1>\n        アニメ検索\n      </h1>\n    );\n  }\n}\n\n// 検索フォーム\nclass AnimeForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cours: \"\"\n    }\n    this.handleChange = this.handleChange.bind(this)\n  }\n\n  // リストボックスを変更せずに検索ボタンをクリックすると\n  // 404エラーになってしまう\n  // ここで現在放送中の放送クールを初期値として設定\n  componentDidMount() {\n    const now = this.props.now()\n    this.setState({cours: now})\n  }\n\n  // リストボックスクリック時に呼ばれる\n  handleChange(e) {\n    this.setState({[e.target.name]: e.target.value})\n  }\n\n  render() {\n    // リストボックス内のデータ\n    const coursNodes = this.props.coursList.map((list) => { \n      return(\n        <option value={list.cours}>{list.season}</option>\n      )\n    })\n    return (\n      <div className={css.form}>\n        <div className={css.move}>\n          <select name=\"cours\" onChange={this.handleChange}>\n            {coursNodes}\n          </select>\n        </div>\n        <button className={css.btn} onClick={() => this.props.search(this.state.cours)}>検索</button>\n        <input type=\"checkbox\" id=\"city_chk\" onClick={this.props.check} onLoad={this.props.check}/>\n        <label htmlFor=\"city_chk\">聖地があるアニメのみ</label>\n      </div>\n    )\n  }\n}\n\nclass AnimeList extends React.Component {\n  render() {\n    // アニメデータ\n    const animeNodes = this.props.anime.map((anime) => { \n      // 聖地のみ出力するか判定する部分  \n      if(this.props.checked) {\n        if(`${anime.city_name}`) { \n          return(\n            <AnimeData key={anime.id} title={anime.title} url={anime.public_url} img={anime.ogp.og_image} city={anime.city_name} twitter={anime.twitter_account}></AnimeData>\n          )\n        }\n      } else {\n        return(\n          <AnimeData key={anime.id} title={anime.title} url={anime.public_url} img={anime.ogp.og_image} city={anime.city_name} twitter={anime.twitter_account}></AnimeData>\n        )\n      }  \n    })\n\n    return (\n      <div className={css.tile}>\n        {animeNodes}\n      </div>\n    )\n  }\n}\n\nclass AnimeData extends React.Component {\n  render() {\n    // 作品タイトル+聖地名でGoogle検索するURL\n    const searchURL = `https://www.google.com/search?q=${this.props.title}+${this.props.city}`\n    // 公式TwitterアカウントのURL\n    const twitterURL = `https://twitter.com/${this.props.twitter}`\n\n    // 聖地が無ければ聖地データは入れない\n    let   city      = `${this.props.city}`.replace(/\\|/g, '')\n    if(city === \"\") {\n      city = \"\"\n    } else {\n      city = \"聖地 : \" + city\n    }\n\n    // 画像のURLはテスト用\n    return (\n      <div className={css.card}>\n        <div className={css.card_imgframe + ' ' + css.box_1x1}>\n          <a href={this.props.url} target=\"_blank\">\n            <img className={css.card_img} src={this.props.img} onError={(e) => e.target.src = 'http://design-ec.com/d/e_others_50/m_e_others_500.png'}/>\n          </a>\n        </div>\n        <div className={css.card_textbox}>\n          <a href={searchURL} target=\"_blank\">\n            <div className={css.card_titletext}>\n              {this.props.title}\n            </div>\n            <div className={css.card_overviewtext}>\n              {city}\n            </div>\n          </a>\n          <a href={twitterURL} target=\"_blank\">\n            <div className={css.card_overviewtext}>\n              twitter : @{this.props.twitter}\n            </div>\n          </a>\n        </div>\n      </div>\n    );\n  }\n}","import App  from '../components/App.js'\n// import css from '../public/styles.scss'\n\nconst Index = () => (\n  <div>\n    <App />\n  </div>\n)\n\nexport default Index","module.exports = {\n\t\"box_1x1\": \"_2Pj1GZJE7wQqLTHGLvTC7u\",\n\t\"btn\": \"_1RbNIs_HgTnRl-JAQG5qpq\",\n\t\"card\": \"_22y42FMTNzR8PH_YBZPAWm\",\n\t\"card_img\": \"PA3tiqrT9K12P1K-Bd7tO\",\n\t\"card_imgframe\": \"_2_R9OA2uA53ZfxxqoWeLC\",\n\t\"card_textbox\": \"fcaxQIehnnnrsLghYsSsH\",\n\t\"card_titletext\": \"_3rza6q6IThvZg4z28kX2Rn\",\n\t\"card_overviewtext\": \"_2AXv1dn4SAbimpwB4d2IVD\",\n\t\"form\": \"_6U07Wl-kMK7Xz1OluPuV3\",\n\t\"header\": \"_1nReRm93trfXGQvryAN51J\",\n\t\"list\": \"_1rUHImVfnkmOw-kIN3GXzG\",\n\t\"move\": \"_1MvAwrXMJJliRHdhfPfFFD\",\n\t\"tile\": \"_3VKNzMsu4hrBJPgWANBB_3\"\n};","module.exports = require(\"axios\");","module.exports = require(\"react\");"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;ACxFA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AADA;AACA;AACA;AACA;AAAA;AAAA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AADA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AArIA;AACA;AAuIA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AARA;AACA;AACA;AASA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AAGA;AACA;AACA;AACA;AADA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AA1CA;AACA;AA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAxBA;AACA;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AAzCA;;;;;;;;;;;;;;;;;;;AC9NA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;;;;;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;ACdA;;;;;;;;;;;ACAA;;;;A","sourceRoot":""}